function clearNewFieldInputs(){jQuery(".lw-woo-gdpr-new-fields-row #lw-woo-gdpr-new-title").val(""),jQuery(".lw-woo-gdpr-new-fields-row #lw-woo-gdpr-new-label").val(""),jQuery(".lw-woo-gdpr-new-fields-row #lw-woo-gdpr-new-required").prop("checked",!1)}function resetTableCount(e){jQuery("div.tablenav").each(function(){jQuery(this).find("span.displaying-num").text(e)})}jQuery(document).ready(function(a){a.fn.divExists=function(e){var t=[].slice.call(arguments,1);return this.length&&e.call(this,t),this};var o,e="form#mainform",i="table.lw-woo-gdpr-saved-table-wrap",s="table.lw-woo-gdpr-saved-table-wrap tbody",l="table.userdeletionrequests";a(i).divExists(function(){a(s).sortable({handle:".lw-woo-gdpr-trigger-icon",update:function(e,t){var o={action:"lw_woo_update_sorted_rows",sorted:a(s).sortable("toArray",{attribute:"data-key"})};jQuery.post(ajaxurl,o)}})}),a(e).on("click","button",function(){o=!!a(this).hasClass("lw-woo-gdpr-add-new")}),a(e).submit(function(e){if(!0===o){if(e.preventDefault(),a(".woo-nav-tab-wrapper a").off(),newNonce=a("input#lw_woo_gdpr_new_nonce").val(),""===newNonce||void 0===newNonce)return!1;var t={action:"lw_woo_add_new_optin_row",required:a("input#lw-woo-gdpr-new-required").is(":checked"),title:a("input#lw-woo-gdpr-new-title").val(),label:a("input#lw-woo-gdpr-new-label").val(),nonce:newNonce};jQuery.post(ajaxurl,t,function(e){if(!0!==e.success)return!1;""!==e.data.markup&&(clearNewFieldInputs(),a("table#lw-woo-gdpr-fields-table tr:last").after(e.data.markup),a(s).sortable("refreshPositions"))},"json")}}),a(i).on("click","a.lw-woo-gdpr-field-trigger-trash",function(e){e.preventDefault();var t=a(this).parents("tr.lw-woo-gdpr-field-single"),o=a(this).data("field-id"),r=a(this).data("nonce");if(""===r||void 0===r)return!1;if(""===o||void 0===o)return!1;var n={action:"lw_woo_delete_single_row",field_id:o,nonce:r};jQuery.post(ajaxurl,n,function(e){if(!0!==e.success)return!1;!0!==e.success&&"true"!==e.success||(a(i).find(t).fadeOut().remove(),a(s).sortable("refreshPositions"))},"json")}),a("form#lw-woo-gdpr-requests-admin-form").divExists(function(){a(l).on("click","a.lw-woo-action-delete",function(e){e.preventDefault();var t=a(this).parents("tr"),o=a(this).data("user-id"),r=a(this).data("nonce");if(""===r||void 0===r)return!1;if(""===o||void 0===o)return!1;var n={action:"lw_woo_process_user_delete",user_id:o,nonce:r};jQuery.post(ajaxurl,n,function(e){if(!0!==e.success)return!1;!0!==e.success&&"true"!==e.success||a(l).find(t).fadeOut().remove(),""!==e.data.ctext&&resetTableCount(e.data.ctext),!0!==e.data.remain&&window.location.reload(!0)},"json")})})});