function setAccountNotification(e,o){var t="";t+='<div class="lw-woo-gdpr-notice lw-woo-gdpr-notice-'+e+'">',t+="<p>"+o+"</p>",t+="</div>",jQuery(".lw-woo-account-notices").html(t),scrollToMessage(),jQuery(".lw-woo-gdpr-notice").delay(5e3).fadeOut("slow",function(){jQuery(this).remove()})}function scrollToMessage(){return jQuery("html,body").animate({scrollTop:jQuery(".lw-woo-account-notices").offset().top-60},500),!1}function clearAllCheckboxes(e){jQuery(e).each(function(){jQuery(this).find("input:checkbox").prop("checked",!1)})}jQuery(document).ready(function(e){e.fn.divExists=function(e){var o=[].slice.call(arguments,1);return this.length&&e.call(this,o),this};var o="div.lw-woo-gdpr-download-section";e("div.lw-woo-gdpr-section").divExists(function(){e("form.lw-woo-gdpr-changeopt-form").submit(function(o){o.preventDefault();var t=e("input#lw_woo_gdpr_changeopt_nonce").val();if(""===t||void 0===t)return!1;var r={action:"lw_woo_update_user_optins",user_id:e("input#lw_woo_gdpr_data_changeopt_user").val(),optins:e("ul.lw-woo-gdpr-optin-list input:checked").map(function(){return this.id}).get(),nonce:t};jQuery.post(ajaxurl,r,function(o){if(""!==o.data.message&&setAccountNotification(!0!==o.success?"error":"success",o.data.message),!0!==o.success)return!1;""!==o.data.markup&&e("ul.lw-woo-gdpr-optin-list").empty().append(o.data.markup)},"json")}),e("form.lw-woo-gdpr-export-form").submit(function(t){t.preventDefault();var r=e("input#lw_woo_gdpr_export_nonce").val();if(""===r||void 0===r)return!1;var n={action:"lw_woo_request_user_exports",user_id:e("input#lw_woo_gdpr_data_export_user").val(),exports:e("ul.lw-woo-gdpr-export-options input:checked").map(function(){return this.value}).get(),nonce:r};jQuery.post(ajaxurl,n,function(t){if(""!==t.data.message&&setAccountNotification(!0!==t.success?"error":"success",t.data.message),!0!==t.success)return!1;""!==t.data.markup&&(clearAllCheckboxes("li.lw-woo-gdpr-export-option"),e(o).replaceWith(t.data.markup))},"json")}),e(o).on("click","a.lw-woo-gdpr-delete-link",function(t){t.preventDefault();var r=e(this).data("nonce");if(""===r||void 0===r)return!1;var n={action:"lw_woo_delete_export_file",user_id:e(this).data("user-id"),datatype:e(this).data("type"),nonce:r};jQuery.post(ajaxurl,n,function(t){if(""!==t.data.message&&setAccountNotification(!0!==t.success?"error":"success",t.data.message),!0!==t.success)return!1;""!==t.data.markup&&e(o).find(t.data.markup).remove()},"json")}),e("form.lw-woo-gdpr-delete-me-form").submit(function(o){o.preventDefault();var t=e("input#lw_woo_gdpr_delete_nonce").val();if(""===t||void 0===t)return!1;var r={action:"lw_woo_request_user_deletion",user_id:e("input#lw_woo_gdpr_data_delete_user").val(),deletes:e("ul.lw-woo-gdpr-delete-options input:checked").map(function(){return this.value}).get(),nonce:t};jQuery.post(ajaxurl,r,function(o){if(""!==o.data.message&&setAccountNotification(!0!==o.success?"error":"success",o.data.message),!0!==o.success)return!1;""!==o.data.markup&&(clearAllCheckboxes("li.lw-woo-gdpr-delete-option"),e("ul.lw-woo-gdpr-delete-options").empty().append(o.data.markup.requests)),!0!==o.data.markup.remaining&&e("p.lw-woo-gdpr-delete-submit").empty().append("<em>"+frontLWWooGDPR.remain_text+"</em>")},"json")})})});