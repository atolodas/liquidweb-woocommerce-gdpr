function setAccountNotification(o,t){var e="";e+='<div class="lw-woo-gdpr-notice lw-woo-gdpr-notice-'+o+'">',e+="<p>"+t+"</p>",e+="</div>",jQuery(".lw-woo-account-notices").html(e),scrollToMessage(),jQuery(".lw-woo-account-notices").delay(4e3).fadeOut("slow",function(){jQuery(this).remove()})}function scrollToMessage(){return jQuery("html,body").animate({scrollTop:jQuery(".lw-woo-gdpr-notice").offset().top-60},500),!1}jQuery(document).ready(function(n){n.fn.divExists=function(o){var t=[].slice.call(arguments,1);return this.length&&o.call(this,t),this};var i="div.lw-woo-gdpr-download-section";n("div.lw-woo-gdpr-section").divExists(function(){n("form.lw-woo-gdpr-changeopt-form").on("click",".lw-woo-gdpr-optin-list-submit",function(o){o.preventDefault();var t=n("input#lw_woo_gdpr_changeopt_nonce").val();if(""===t||void 0===t)return!1;var e={action:"lw_woo_update_user_optins",user_id:n("input#lw_woo_gdpr_data_changeopt_user").val(),optins:n("ul.lw-woo-gdpr-optin-list input:checked").map(function(){return this.id}).get(),nonce:t};jQuery.post(ajaxurl,e,function(o){if(!0!==o.success)return!1;""!==o.data.markup&&(setAccountNotification("success",o.data.message),n("ul.lw-woo-gdpr-optin-list").empty().append(o.data.markup))})}),n("form.lw-woo-gdpr-export-form").on("click",".lw-woo-gdpr-optin-export-submit",function(o){o.preventDefault();var t=n("input#lw_woo_gdpr_export_nonce").val();if(""===t||void 0===t)return!1;var e={action:"lw_woo_request_user_exports",user_id:n("input#lw_woo_gdpr_data_export_user").val(),exports:n("ul.lw-woo-gdpr-export-options input:checked").map(function(){return this.value}).get(),nonce:t};jQuery.post(ajaxurl,e,function(o){if(!0!==o.success)return!1;""!==o.data.markup&&(setAccountNotification("success",o.data.message),n(i).replaceWith(o.data.markup))})}),n(i).on("click","a.lw-woo-gdpr-delete-link",function(o){if(o.preventDefault(),filesNonce=n(this).data("nonce"),""===filesNonce||void 0===filesNonce)return!1;var t={action:"lw_woo_delete_export_file",user_id:n(this).data("user-id"),datatype:n(this).data("type"),nonce:filesNonce};jQuery.post(ajaxurl,t,function(o){if(!0!==o.success)return!1;""!==o.data.message&&(setAccountNotification("success",o.data.message),n(i).find(o.data.markup).remove())})})})});