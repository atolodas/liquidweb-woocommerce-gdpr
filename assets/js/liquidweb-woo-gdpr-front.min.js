function setAccountNotification(e,o){var t="";t+='<div class="lw-woo-gdpr-notice lw-woo-gdpr-notice-'+e+'">',t+="<p>"+o+"</p>",t+="</div>",jQuery(".lw-woo-account-notices").html(t),scrollToMessage(),jQuery(".lw-woo-gdpr-notice").delay(5e3).fadeOut("slow",function(){jQuery(this).remove()})}function scrollToMessage(){return jQuery("html,body").animate({scrollTop:jQuery(".lw-woo-account-notices").offset().top-60},500),!1}function clearAllCheckboxes(e){jQuery(e).each(function(){jQuery(this).find("input:checkbox").prop("checked",!1)})}jQuery(document).ready(function(r){r.fn.divExists=function(e){var o=[].slice.call(arguments,1);return this.length&&e.call(this,o),this};var n="div.lw-woo-gdpr-download-section";r("div.lw-woo-gdpr-section").divExists(function(){r("form.lw-woo-gdpr-changeopt-form").submit(function(e){e.preventDefault();var o=r("input#lw_woo_gdpr_changeopt_nonce").val();if(""===o||void 0===o)return!1;var t={action:"lw_woo_update_user_optins",user_id:r("input#lw_woo_gdpr_data_changeopt_user").val(),optins:r("ul.lw-woo-gdpr-optin-list input:checked").map(function(){return this.id}).get(),nonce:o};jQuery.post(ajaxurl,t,function(e){if(""!==e.data.message&&setAccountNotification(!0!==e.success?"error":"success",e.data.message),!0!==e.success)return!1;""!==e.data.markup&&r("ul.lw-woo-gdpr-optin-list").empty().append(e.data.markup)},"json")}),r("form.lw-woo-gdpr-export-form").submit(function(e){e.preventDefault();var o=r("input#lw_woo_gdpr_export_nonce").val();if(""===o||void 0===o)return!1;var t={action:"lw_woo_request_user_exports",user_id:r("input#lw_woo_gdpr_data_export_user").val(),exports:r("ul.lw-woo-gdpr-export-options input:checked").map(function(){return this.value}).get(),nonce:o};jQuery.post(ajaxurl,t,function(e){if(""!==e.data.message&&setAccountNotification(!0!==e.success?"error":"success",e.data.message),!0!==e.success)return!1;""!==e.data.markup&&(clearAllCheckboxes("li.lw-woo-gdpr-export-option"),r(n).replaceWith(e.data.markup))},"json")}),r(n).on("click","a.lw-woo-gdpr-delete-link",function(e){e.preventDefault();var o=r(this).data("nonce");if(""===o||void 0===o)return!1;var t={action:"lw_woo_delete_export_file",user_id:r(this).data("user-id"),datatype:r(this).data("type"),nonce:o};jQuery.post(ajaxurl,t,function(e){if(""!==e.data.message&&setAccountNotification(!0!==e.success?"error":"success",e.data.message),!0!==e.success)return!1;""!==e.data.markup&&r(n).find(e.data.markup).remove()},"json")}),r("form.lw-woo-gdpr-delete-me-form").submit(function(e){e.preventDefault();var o=r("input#lw_woo_gdpr_delete_nonce").val();if(""===o||void 0===o)return!1;var t={action:"lw_woo_request_user_deletion",user_id:r("input#lw_woo_gdpr_data_delete_user").val(),deletes:r("ul.lw-woo-gdpr-delete-options input:checked").map(function(){return this.value}).get(),nonce:o};jQuery.post(ajaxurl,t,function(e){if(""!==e.data.message&&setAccountNotification(!0!==e.success?"error":"success",e.data.message),!0!==e.success)return!1;""!==e.data.markup&&(clearAllCheckboxes("li.lw-woo-gdpr-delete-option"),r("ul.lw-woo-gdpr-delete-options").empty().append(e.data.markup.requests)),!0!==e.data.markup.remaining&&r("p.lw-woo-gdpr-delete-submit").empty().append("<em>"+frontLWWooGDPR.remain_text+"</em>")},"json")})})});